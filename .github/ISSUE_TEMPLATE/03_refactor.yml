# .github/ISSUE_TEMPLATE/03_refactor.yml
name: â™»ï¸ Refactor
description: ì½”ë“œ í’ˆì§ˆ/êµ¬ì¡°/ì„±ëŠ¥/ì•ˆì •ì„± ê°œì„  (ê¸°ëŠ¥ ë³€í™” ìµœì†Œí™”)
title: "[REFACTOR] "
labels: ["refactor"]
body:
  - type: markdown
    attributes:
      value: |
        ## â™»ï¸ ë¦¬íŒ©í† ë§ ê°€ì´ë“œ
        - **ê¸°ëŠ¥ ë™ì‘ì€ ë™ì¼**, í’ˆì§ˆ/êµ¬ì¡°/ì„±ëŠ¥ì„ ê°œì„ í•©ë‹ˆë‹¤.
        - ì˜í–¥ ë²”ìœ„, ì„±ëŠ¥/ì•ˆì •ì„± ë¦¬ìŠ¤í¬, ë¡¤ë°±/ê²€ì¦ ê³„íšì„ ëª…í™•íˆ í•˜ì„¸ìš”.
        - í•˜ìœ„ ì‘ì—…ì´ í•„ìš”í•˜ë©´ ì•„ë˜ Subtasksë¥¼ ì´ìŠˆë¡œ ë³€í™˜í•˜ê³  **ì–‘ë°©í–¥ ì—°ê²°**í•˜ì„¸ìš”.

  # 0) ìƒìœ„ ì—°ê²°(ì„ íƒ)
  - type: input
    id: parent_task
    attributes:
      label: â†—ï¸ Parent Task (ì„ íƒ)
      description: ìƒìœ„ Task ì´ìŠˆ ë²ˆí˜¸(#42 í˜•ì‹)
      placeholder: "#42"
  - type: input
    id: related_bug
    attributes:
      label: ğŸ› ê´€ë ¨ Bug ì´ìŠˆ (ì„ íƒ)
      description: ì´ ë¦¬íŒ©í† ë§ì˜ ê³„ê¸°ê°€ ëœ Bug ì´ìŠˆ ë²ˆí˜¸(#42 í˜•ì‹)
      placeholder: "#42"
  - type: checkboxes
    id: refactor_trigger
    attributes:
      label: ğŸ¯ ë¦¬íŒ©í† ë§ ê³„ê¸°
      options:
        - label: ğŸ› Bug ìˆ˜ì • ê³¼ì •ì—ì„œ ë°œê²¬ëœ êµ¬ì¡°ì  ë¬¸ì œ
        - label: ğŸ“Š ì„±ëŠ¥ ì´ìŠˆ í•´ê²° í•„ìš”
        - label: ğŸ§ª í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€/ì»¤ë²„ë¦¬ì§€ ë¶€ì¡±
        - label: ğŸ”„ ì½”ë“œ ì¤‘ë³µ/ë³µì¡ë„ ê°œì„ 
        - label: ğŸ“ ê¸°ìˆ  ë¶€ì±„ ì •ë¦¬
        - label: ğŸ”§ ìƒˆ ìš”êµ¬ì‚¬í•­ ëŒ€ë¹„ êµ¬ì¡° ê°œì„ 

  # 1) ëŒ€ìƒ/í˜„í™©/ë¬¸ì œ
  - type: textarea
    id: target_scope
    attributes:
      label: ğŸ¯ ëŒ€ìƒÂ·ë²”ìœ„
      description: íŒŒì¼/ëª¨ë“ˆ/ë ˆì´ì–´/ê²½ë¡œ ë“± êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ
      placeholder: |
        ì˜ˆ) FE: src/components/Table/*
            BE: app.user.service.*, repository.*, /v1/users/*
    validations:
      required: true
  - type: textarea
    id: current_issues
    attributes:
      label: ğŸ§© í˜„ì¬ ë¬¸ì œ/ì•…ì·¨(Code Smell)
      description: ë³µì¡ë„/ì¤‘ë³µ/ê²°í•©ë„/ì‘ì§‘ë„/ì„±ëŠ¥/ë©”ëª¨ë¦¬/í…ŒìŠ¤íŠ¸ ì·¨ì•½ì  ë“±
      placeholder: |
        - ì¤‘ë³µ ì¿¼ë¦¬ë¡œ p95 900ms ì´ˆê³¼
        - ê±°ëŒ€ ì»´í¬ë„ŒíŠ¸(> 600 LOC)ë¡œ ë³€ê²½ ë¹„ìš©â†‘/í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€

  # 2) ê°œì„  ëª©í‘œ & ìˆ˜ìš© ê¸°ì¤€(AC)
  - type: textarea
    id: goals
    attributes:
      label: ğŸ¯ ê°œì„  ëª©í‘œ
      placeholder: |
        - p95 ì‘ë‹µ 900ms â†’ 300ms ì´í•˜
        - ìˆœí™˜ ì˜ì¡´ ì œê±°, íŒŒì¼ë‹¹ LOC < 300
  - type: textarea
    id: ac
    attributes:
      label: âœ… ìˆ˜ìš© ê¸°ì¤€(AC)
      description: í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ë¬¸ì¥/ìˆ«ì ê¸°ì¤€ ê¶Œì¥
      placeholder: |
        - [ ] ë™ì¼ ì…ë ¥ ëŒ€ë¹„ ì¶œë ¥/ì‚¬ì´ë“œì´í™íŠ¸ê°€ ê¸°ì¡´ê³¼ ë™ì¼í•¨(íšŒê·€ ì—†ìŒ)
        - [ ] p95 < 300ms (@/users?filter=active)
        - [ ] Unit ì»¤ë²„ë¦¬ì§€ > 70%, ë³€ê²½ ë¼ì¸ diff ì»¤ë²„ë¦¬ì§€ > 90%
        - [ ] ë²ˆë“¤ ì‚¬ì´ì¦ˆ -15% (FE), í• ë‹¹ ë©”ëª¨ë¦¬ -20% (BE)
    validations:
      required: true

  # 3) ì„¤ê³„/ì „ëµ
  - type: textarea
    id: approach
    attributes:
      label: ğŸ§  ì ‘ê·¼ ì „ëµ
      placeholder: |
        - ëª¨ë“ˆ ë¶„ë¦¬(Ports/Adapters), ì˜ì¡´ ì—­ì „, íŠ¸ëœì­ì…˜ ê²½ê³„ ì¬ì¡°ì •
        - ìºì‹œ ë ˆì´ì–´ ë„ì…(Upstash/Redis), N+1 ì œê±°, ì¸ë±ìŠ¤ ìµœì í™”
        - FE ìƒíƒœ ë¶„ë¦¬, ë©”ëª¨ì´ì œì´ì…˜, ê°€ìƒ ìŠ¤í¬ë¡¤
  - type: checkboxes
    id: tradeoffs
    attributes:
      label: âš–ï¸ íŠ¸ë ˆì´ë“œì˜¤í”„/ë¦¬ìŠ¤í¬
      options:
        - label: ì„±ëŠ¥/ë©”ëª¨ë¦¬/ë¹„ìš© ì˜í–¥ ê°€ëŠ¥
        - label: ë§ˆì´ê·¸ë ˆì´ì…˜/ë°ì´í„° ì •í•©ì„± ì´ìŠˆ ê°€ëŠ¥
        - label: ë³‘ë ¬ ì‘ì—…ê³¼ ì¶©ëŒ ê°€ëŠ¥(ë¨¸ì§€ ë¦¬ìŠ¤í¬)

  # 4) ê²€ì¦/ë¡¤ë°±/ê´€ì¸¡
  - type: textarea
    id: verification
    attributes:
      label: ğŸ” ê²€ì¦ ê³„íš
      placeholder: |
        - ë‹¨ìœ„/ìŠ¬ë¼ì´ìŠ¤/í†µí•©/E2E í…ŒìŠ¤íŠ¸
        - ì„±ëŠ¥ ì¸¡ì • ì‹œë‚˜ë¦¬ì˜¤ ë° ìƒ˜í”Œ ë°ì´í„°(ê³ ì • seed)
        - A/B ë˜ëŠ” Shadow íŠ¸ë˜í”½
  - type: textarea
    id: rollback
    attributes:
      label: â†©ï¸ ë¡¤ë°± ì „ëµ
      placeholder: |
        - Feature flag/Env toggle
        - Canary â†’ ì ì§„ ë°°í¬ â†’ ì „ì²´ ì „ê°œ
  - type: textarea
    id: observability
    attributes:
      label: ğŸ“ˆ ê´€ì¸¡/ì•ŒëŒ
      placeholder: |
        - ë¡œê·¸/ë©”íŠ¸ë¦­/íŠ¸ë ˆì´ì‹± ì§€í‘œ ë° ì„ê³„ê°’
        - ì•ŒëŒ ë£°(ì—ëŸ¬ìœ¨, p95, ê³ ë£¨í‹´/ìŠ¤ë ˆë“œ/í ì ì²´ ë“±)

  # 5) ì¼ì •/ìš°ì„ ìˆœìœ„/ë„ë©”ì¸
  - type: input
    id: milestone
    attributes:
      label: ğŸ—“ï¸ ë§ˆì¼ìŠ¤í†¤/ìŠ¤í”„ë¦°íŠ¸ (ì„ íƒ)
      placeholder: 2025-09 Sprint 1
  - type: dropdown
    id: priority
    attributes:
      label: ğŸš¦ ìš°ì„ ìˆœìœ„
      options: [P0-urgent, P1-high, P2-med, P3-low]
  - type: dropdown
    id: domain
    attributes:
      label: ğŸ§­ ë„ë©”ì¸(ë³µìˆ˜ ì„ íƒ)
      multiple: true
      options: [frontend, backend, infra, design, docs, auth, explore, review, mypage]

  # 6) Subtasks
  - type: textarea
    id: subtasks
    attributes:
      label: ğŸ§© Subtasks (ì²´í¬ë¦¬ìŠ¤íŠ¸ â†’ ì´ìŠˆ ì „í™˜ ê¶Œì¥)
      placeholder: |
        - [ ] ë¦¬í¬ì§€í† ë¦¬ ê³„ì¸µ ë¶„ë¦¬ # 
        - [ ] ì¿¼ë¦¬ ìµœì í™”/ì¸ë±ìŠ¤ ì¶”ê°€ #
        - [ ] ìºì‹œ ë¯¸ìŠ¤/ì ì¤‘ë¥  ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ #
      description: Convert to issueë¡œ ê°œë³„ ì´ìŠˆ ìƒì„± í›„ ì´ í•­ëª©ì— #ë²ˆí˜¸ ì—°ê²°

  # 7) ì°¸ê³ 
  - type: textarea
    id: refs
    attributes:
      label: ğŸ”— ì°¸ê³ /ì—°ê´€ ì´ìŠˆÂ·PRÂ·ë¬¸ì„œ
      placeholder: |
        - #123, #456 / ADR ë§í¬ / ì„±ëŠ¥ ë¦¬í¬íŠ¸ / ë””ìì¸ ë§í¬
